# =================================================================
# SALES ADVISOR APP - PRODUCTION ENVIRONMENT CONFIGURATION
# =================================================================
# Complete environment variables setup for production-ready SaaS platform
# Last updated: 2025-01-19
# Security level: CRITICAL - Never commit actual values to git

# =================================================================
# ENVIRONMENT CONFIGURATION
# =================================================================
# Environment identifier (development|staging|production)
NEXT_PUBLIC_ENVIRONMENT=development

# Application metadata
NEXT_PUBLIC_APP_NAME="Sales Advisor App"
# IMPORTANT: Update this to your actual domain in production
NEXT_PUBLIC_APP_URL=http://localhost:3001

# =================================================================
# SUPABASE CONFIGURATION (CRITICAL - REQUIRED)
# =================================================================
# Supabase project URL (public - safe to expose to client)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co

# Anonymous key (public - safe to expose to client, has limited permissions)
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.your_anon_key_payload.your_anon_key_signature

# SERVICE ROLE KEY (CRITICAL SECURITY)
# ⚠️  NEVER expose this to the client-side code
# ⚠️  Only use in server-side API routes and middleware
# ⚠️  Has full database access - treat as root password
# Get this from: Supabase Dashboard → Settings → API → service_role key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# =================================================================
# GOOGLE OAUTH CONFIGURATION (REQUIRED FOR AUTHENTICATION)
# =================================================================
# Google OAuth Client ID (can be public)
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com

# Google OAuth Client Secret (CRITICAL - keep private)
GOOGLE_CLIENT_SECRET=your_google_client_secret_here

# OAuth Redirect URI - must match exactly in Google Console
# Development: http://localhost:3001/api/auth/callback/google
# Production: https://your-domain.com/api/auth/callback/google
GOOGLE_REDIRECT_URI=http://localhost:3001/api/auth/callback/google

# =================================================================
# AI SERVICE INTEGRATIONS
# =================================================================

# Anthropic Claude API Key (CRITICAL - for action generation)
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# ElevenLabs API Key (OPTIONAL - for voice synthesis)
# Get from: https://elevenlabs.io/speech-synthesis
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here

# OpenAI API Key (OPTIONAL - alternative AI provider)
OPENAI_API_KEY=your_openai_api_key_here

# =================================================================
# WORKFLOW AUTOMATION (N8N INTEGRATION)
# =================================================================
# N8N webhook URL for contact enrichment workflows
N8N_WEBHOOK_URL=https://your-n8n-instance.com/webhook/contact-enrich

# N8N webhook secret for request validation
N8N_WEBHOOK_SECRET=your_n8n_webhook_secret_here

# =================================================================
# SECURITY & SESSION MANAGEMENT
# =================================================================
# NextAuth.js secret (CRITICAL - for JWT signing)
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=your_nextauth_secret_32_chars_minimum

# JWT signing secret (if using custom JWT implementation)
JWT_SECRET=your_jwt_secret_here

# Session encryption key (for custom session management)
SESSION_SECRET=your_session_secret_here

# =================================================================
# FEATURE FLAGS CONFIGURATION
# =================================================================
# Sistema robusto de feature flags para el rollout gradual de RLS

# Control global de RLS
# development: false | staging: true | production: true
NEXT_PUBLIC_FEATURE_RLS_ENABLED=false

# Autenticación mock para desarrollo
# development: true | staging: false | production: false
NEXT_PUBLIC_FEATURE_USE_MOCK_AUTH=true

# Rollout gradual tabla por tabla
# development: true | staging: true | production: true
NEXT_PUBLIC_FEATURE_GRADUAL_RLS_ROLLOUT=true

# Kill switch de emergencia (SOLO PARA EMERGENCIAS)
# Desactiva TODO RLS inmediatamente
NEXT_PUBLIC_RLS_KILL_SWITCH=false

# Logging de feature flags
# development: true | staging: true | production: true
NEXT_PUBLIC_FEATURE_FLAG_LOGGING=true

# Bypass de autenticación mock (desarrollo)
# development: true | staging: false | production: false
NEXT_PUBLIC_MOCK_AUTH_BYPASS=true

# Modo estricto RLS
# development: false | staging: false | production: true
NEXT_PUBLIC_RLS_STRICT_MODE=false

# Modo override (solo desarrollo/testing)
# development: true | staging: true | production: false
NEXT_PUBLIC_FEATURE_OVERRIDE_MODE=true

# =================================================================
# RLS POR TABLA (las 9 tablas críticas sin RLS)
# =================================================================
# Controla RLS individualmente para cada tabla
# Solo aplica cuando GRADUAL_RLS_ROLLOUT=true

NEXT_PUBLIC_RLS_TABLE_USERS=false
NEXT_PUBLIC_RLS_TABLE_USER_SESSIONS=false
NEXT_PUBLIC_RLS_TABLE_USER_PERFORMANCE=false
NEXT_PUBLIC_RLS_TABLE_AI_MODEL_CONFIGS=false
NEXT_PUBLIC_RLS_TABLE_API_RATE_LIMITS=false
NEXT_PUBLIC_RLS_TABLE_AUTH_SESSION_MONITORING=false
NEXT_PUBLIC_RLS_TABLE_CONTACT_EMBEDDINGS=false
NEXT_PUBLIC_RLS_TABLE_REAL_TIME_PRESENCE=false
NEXT_PUBLIC_RLS_TABLE_SYSTEM_LOGS=false

# =================================================================
# MONITORING & OBSERVABILITY (OPTIONAL)
# =================================================================
# Sentry DSN for error tracking
SENTRY_DSN=your_sentry_dsn_here

# DataDog API key for metrics
DATADOG_API_KEY=your_datadog_api_key_here

# LogRocket app ID for session recording
LOGROCKET_APP_ID=your_logrocket_app_id_here

# =================================================================
# DEVELOPMENT & DEBUGGING
# =================================================================
# Next.js development mode
NODE_ENV=development

# Enable debug logging
DEBUG=true

# Disable telemetry in development
NEXT_TELEMETRY_DISABLED=1

# =================================================================
# ENVIRONMENT-SPECIFIC PRESETS
# =================================================================

# DEVELOPMENT PRESET
# ------------------
# NODE_ENV=development
# NEXT_PUBLIC_ENVIRONMENT=development
# NEXT_PUBLIC_FEATURE_RLS_ENABLED=false
# NEXT_PUBLIC_FEATURE_USE_MOCK_AUTH=true
# NEXT_PUBLIC_RLS_STRICT_MODE=false
# NEXT_PUBLIC_APP_URL=http://localhost:3001
# GOOGLE_REDIRECT_URI=http://localhost:3001/api/auth/callback/google

# STAGING PRESET
# ---------------
# NODE_ENV=production
# NEXT_PUBLIC_ENVIRONMENT=staging
# NEXT_PUBLIC_FEATURE_RLS_ENABLED=true
# NEXT_PUBLIC_FEATURE_USE_MOCK_AUTH=false
# NEXT_PUBLIC_RLS_STRICT_MODE=false
# NEXT_PUBLIC_APP_URL=https://staging-your-app.vercel.app
# GOOGLE_REDIRECT_URI=https://staging-your-app.vercel.app/api/auth/callback/google

# PRODUCTION PRESET
# -----------------
# NODE_ENV=production
# NEXT_PUBLIC_ENVIRONMENT=production
# NEXT_PUBLIC_FEATURE_RLS_ENABLED=true
# NEXT_PUBLIC_FEATURE_USE_MOCK_AUTH=false
# NEXT_PUBLIC_RLS_STRICT_MODE=true
# NEXT_PUBLIC_FEATURE_OVERRIDE_MODE=false
# NEXT_PUBLIC_APP_URL=https://your-production-domain.com
# GOOGLE_REDIRECT_URI=https://your-production-domain.com/api/auth/callback/google

# =================================================================
# SETUP INSTRUCTIONS
# =================================================================
# 
# 1. SUPABASE SETUP:
#    - Go to https://supabase.com/dashboard
#    - Navigate to Settings → API
#    - Copy Project URL to NEXT_PUBLIC_SUPABASE_URL
#    - Copy anon key to NEXT_PUBLIC_SUPABASE_ANON_KEY
#    - Copy service_role key to SUPABASE_SERVICE_ROLE_KEY
#
# 2. GOOGLE OAUTH SETUP:
#    - Go to https://console.cloud.google.com/
#    - Create new project or select existing
#    - Enable Google Calendar API and Google+ API
#    - Go to Credentials → Create OAuth 2.0 Client ID
#    - Add authorized redirect URIs:
#      • http://localhost:3001/api/auth/callback/google (dev)
#      • https://your-domain.com/api/auth/callback/google (prod)
#
# 3. AI SERVICES SETUP:
#    - Anthropic: https://console.anthropic.com/
#    - ElevenLabs: https://elevenlabs.io/speech-synthesis
#    - OpenAI: https://platform.openai.com/api-keys
#
# 4. SECURITY CHECKLIST:
#    ✓ Never commit .env.local or .env.production files
#    ✓ Use different keys for each environment
#    ✓ Rotate keys regularly
#    ✓ Monitor API usage and costs
#    ✓ Enable rate limiting in production
#    ✓ Use environment variables in deployment platform

# =================================================================